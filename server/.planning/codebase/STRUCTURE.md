# Codebase Structure

**Analysis Date:** 2026-02-25

## Directory Layout

```
oktatasi-hivatal/server/
├── app/                    # Application code
│   ├── Http/              # HTTP layer - controllers, requests, middleware
│   │   └── Controllers/   # Controller classes
│   ├── Models/            # Eloquent models
│   └── Providers/         # Service providers
├── bootstrap/             # Application bootstrapping
│   ├── app.php           # Main application configuration and setup
│   ├── cache/            # Bootstrap cache (generated)
│   └── providers.php     # Service provider registration
├── config/               # Configuration files
├── database/             # Database layer
│   ├── factories/        # Model factories for testing
│   ├── migrations/       # Database migrations
│   └── seeders/          # Database seeders
├── public/               # Web root
│   └── index.php        # HTTP entry point
├── resources/            # Views and assets
│   └── views/           # Blade templates
├── routes/               # Route definitions
│   ├── web.php          # Web routes
│   └── console.php      # Console commands
├── storage/              # Runtime storage
│   ├── app/             # Application files
│   ├── framework/       # Framework files (cache, sessions)
│   └── logs/            # Application logs
├── tests/                # Test suite
│   ├── Feature/         # Feature tests
│   ├── Unit/            # Unit tests
│   ├── Pest.php         # Pest configuration
│   └── TestCase.php     # Base test case
├── vendor/               # Composer dependencies (generated)
├── artisan              # Artisan CLI entry point
└── composer.json        # Composer configuration
```

## Directory Purposes

**app/:**
- Purpose: Application code and business logic
- Contains: Controllers, models, providers, services
- Key files: `app/Models/User.php`, `app/Http/Controllers/Controller.php`, `app/Providers/AppServiceProvider.php`

**app/Http/:**
- Purpose: HTTP-specific code
- Contains: Controllers, form requests, middleware, resource classes
- Key files: `app/Http/Controllers/Controller.php` (base controller class)

**app/Http/Controllers/:**
- Purpose: Request handlers for routes
- Contains: Controller classes handling HTTP requests
- Pattern: One controller per feature or resource (RESTful naming convention)

**app/Models/:**
- Purpose: Eloquent ORM models
- Contains: Database model classes with relationships and casting
- Key files: `app/Models/User.php` (authentication model)

**app/Providers/:**
- Purpose: Service provider classes for application initialization
- Contains: Service providers registered in `bootstrap/providers.php`
- Key files: `app/Providers/AppServiceProvider.php` (main service provider)

**bootstrap/:**
- Purpose: Application bootstrapping and initialization
- Contains: Application configuration returned from `app.php`, provider registration
- Key files: `bootstrap/app.php` (application factory), `bootstrap/providers.php` (provider list)

**bootstrap/app.php:**
- Purpose: Central application configuration and setup (Laravel 12 streamlined structure)
- Configures: Routing, middleware, exception handling
- Returns: Configured `Application` instance
- Called by: `public/index.php` and `artisan` console

**bootstrap/providers.php:**
- Purpose: Register application service providers
- Contains: Array of service provider classes to instantiate
- Pattern: All providers listed here are automatically registered

**config/:**
- Purpose: Application configuration files
- Contains: Database, cache, session, auth, logging, mail, queue configuration
- Key files: `config/app.php` (app settings), `config/database.php` (DB connection)
- Pattern: All configs use environment variables from `.env` via `env()` function
- Usage: Access via `config('key.subkey')` helper function

**database/:**
- Purpose: Database schema and test data
- Contains: Migrations, seeders, factories

**database/migrations/:**
- Purpose: Version control for database schema
- Contains: Migration classes for schema changes
- Key files: `database/migrations/0001_01_01_000000_create_users_table.php` (users table, sessions table)
- Naming pattern: Timestamp-based (auto-generated by `php artisan make:migration`)
- Execution: Auto-loaded and executed by `php artisan migrate`

**database/factories/:**
- Purpose: Generate test/seed data
- Contains: Model factory classes
- Key files: `database/factories/UserFactory.php`
- Pattern: One factory per model; extends `Factory<ModelClass>`
- Usage: `User::factory()->create()` or `User::factory(count)->create()`

**database/seeders/:**
- Purpose: Populate database with initial/test data
- Contains: Seeder classes
- Key files: `database/seeders/DatabaseSeeder.php` (main seeder entry point)
- Execution: `php artisan db:seed` or `php artisan migrate:fresh --seed`

**public/:**
- Purpose: Web-accessible directory (document root)
- Contains: Entry point, static assets, .htaccess
- Key files: `public/index.php` (HTTP entry point)
- Never commit generated files: `.htaccess`, versioned assets in `public/build/`

**public/index.php:**
- Purpose: HTTP entry point for all requests
- Responsibilities: Require autoloader, define LARAVEL_START constant, require `bootstrap/app.php`, call `$app->handleRequest()`
- Called by: Web server on every HTTP request

**resources/views/:**
- Purpose: Blade template files for rendering HTML
- Contains: `.blade.php` template files
- Pattern: Directory structure mirrors route/controller structure
- Usage: Return views from controllers via `view('viewname', $data)`

**routes/:**
- Purpose: Route definitions
- Contains: Route definitions for web, API, console

**routes/web.php:**
- Purpose: Web route definitions (HTTP requests)
- Contains: Route definitions using Laravel's route macros (`Route::get()`, etc.)
- Pattern: RESTful routing; routes should invoke controllers
- Configuration: Loaded in `bootstrap/app.php` via `withRouting(web: ...)`

**routes/console.php:**
- Purpose: Console command definitions for `php artisan`
- Contains: Schedule definitions and callable console commands
- Configuration: Loaded in `bootstrap/app.php` via `withRouting(commands: ...)`

**storage/:**
- Purpose: Runtime-generated files and logs
- Contains: Application files, framework cache, logs
- Key directories: `storage/app/` (file uploads), `storage/framework/` (cache/sessions), `storage/logs/` (application logs)
- Gitignore: Most storage files should not be committed

**storage/logs/:**
- Purpose: Application log files
- Contains: `.log` files generated by Laravel's logging system
- Pattern: Named by log channel configured in `config/logging.php`

**tests/:**
- Purpose: Test suite
- Contains: Feature and unit tests
- Framework: Pest PHP 4 with Laravel plugin
- Configuration: `tests/Pest.php` configures test setup and global helpers

**tests/TestCase.php:**
- Purpose: Base test case class extending Laravel's TestCase
- Usage: Extended by all tests for access to Laravel testing helpers
- Provides: Database transactions, model factories, request testing methods

**tests/Pest.php:**
- Purpose: Pest configuration and test setup
- Contains: Pest configuration, custom expectations, test helpers
- Pattern: `pest()->extend()` adds helpers to test classes
- Disabled: `RefreshDatabase` trait commented out (enable for database-using tests)

**tests/Feature/:**
- Purpose: Feature tests (integration tests)
- Contains: Tests for features involving multiple components
- Base class: `Tests\TestCase` (configured in `Pest.php`)
- Pattern: Test HTTP requests, database state, user workflows
- Naming: `{Feature}Test.php` (e.g., `UserAuthenticationTest.php`)

**tests/Unit/:**
- Purpose: Unit tests for isolated components
- Contains: Tests for individual classes, methods, logic
- Pattern: Mock dependencies; test single responsibility
- Naming: `{Class}Test.php` (e.g., `UserModelTest.php`)

## Key File Locations

**Entry Points:**
- `public/index.php`: HTTP request entry point
- `artisan`: Console command entry point
- `bootstrap/app.php`: Application bootstrap and configuration

**Configuration:**
- `bootstrap/app.php`: Routing, middleware, exception handling configuration
- `bootstrap/providers.php`: Service provider registration
- `config/`: All configuration files (.env variables injected here)
- `.env`: Environment variables (not committed to git)
- `.env.example`: Template for `.env`

**Core Logic:**
- `app/Models/User.php`: Primary Eloquent model for authentication
- `app/Http/Controllers/Controller.php`: Base controller class
- `app/Providers/AppServiceProvider.php`: Application service provider with Eloquent configuration

**Database:**
- `database/migrations/`: Schema definitions
- `database/factories/UserFactory.php`: Test data generation
- `database/seeders/DatabaseSeeder.php`: Initial data seeding
- `database/database.sqlite`: SQLite database file (development)

**Testing:**
- `tests/TestCase.php`: Base test class
- `tests/Pest.php`: Test configuration and helpers
- `tests/Feature/ExampleTest.php`: Feature test template
- `tests/Unit/ExampleTest.php`: Unit test template
- `phpunit.xml.dist`: PHPUnit configuration for test runner

## Naming Conventions

**Files:**
- **Models:** PascalCase, singular (e.g., `User.php`, `Post.php`)
- **Controllers:** PascalCase, singular with "Controller" suffix (e.g., `UserController.php`, `PostController.php`)
- **Migrations:** Timestamp prefix + snake_case description (e.g., `2024_01_19_000000_create_users_table.php`)
- **Factories:** PascalCase model name + "Factory" suffix (e.g., `UserFactory.php`)
- **Seeders:** PascalCase + "Seeder" suffix (e.g., `DatabaseSeeder.php`, `UserSeeder.php`)
- **Views:** kebab-case (e.g., `user-profile.blade.php`, `post-list.blade.php`)
- **Tests:** PascalCase + "Test" suffix (e.g., `UserAuthenticationTest.php`, `PostCreationTest.php`)

**Directories:**
- **App subdirectories:** PascalCase plural (e.g., `Models/`, `Controllers/`, `Providers/`)
- **Config files:** kebab-case (e.g., `database.php`, `cache.php`)
- **Routes:** Plural for resource (e.g., `/users`, `/posts`)
- **Views:** kebab-case (e.g., `resources/views/user-profile/`, `resources/views/posts/`)

**Classes:**
- **Models:** PascalCase, singular (e.g., `class User`, `class Post`)
- **Controllers:** PascalCase with "Controller" suffix (e.g., `class UserController`)
- **Providers:** PascalCase with "Provider" suffix (e.g., `class AppServiceProvider`)
- **Factories:** PascalCase with "Factory" suffix (e.g., `class UserFactory`)
- **Seeders:** PascalCase with "Seeder" suffix (e.g., `class DatabaseSeeder`)

**Methods:**
- **Model methods:** camelCase, descriptive verbs (e.g., `getFullName()`, `isAdmin()`, `hasOrders()`)
- **Relationship methods:** camelCase, matching related model name (e.g., `posts()`, `owner()`, `comments()`)
- **Factory methods:** camelCase, describing state (e.g., `verified()`, `unverified()`, `admin()`)
- **Test methods:** snake_case starting with "test_" or using closure names (e.g., `test_user_can_login`)

## Where to Add New Code

**New Feature (e.g., Blog Posts):**
- Model: `app/Models/Post.php` (create with `php artisan make:model Post`)
- Migration: `database/migrations/YYYY_MM_DD_HHMMSS_create_posts_table.php` (create with `php artisan make:migration`)
- Factory: `database/factories/PostFactory.php` (create with `php artisan make:factory PostFactory`)
- Controller: `app/Http/Controllers/PostController.php` (create with `php artisan make:controller PostController`)
- Form Request: `app/Http/Requests/StorePostRequest.php` (create with `php artisan make:request StorePostRequest`)
- Routes: Add to `routes/web.php` (RESTful resource route: `Route::resource('posts', PostController::class)`)
- Tests: Feature tests in `tests/Feature/PostTest.php`, unit tests in `tests/Unit/PostModelTest.php`

**New Component/Module:**
- If it's a reusable business logic class: `app/Services/{Domain}/ClassName.php`
- If it's supporting an existing feature: Place in appropriate subdirectory under `app/`
- Use Laravel Boost command: `php artisan make:class {namespace/ClassName}`

**Utilities/Helpers:**
- Shared helper functions: `app/Helpers/FunctionName.php`
- General utilities: `app/Utils/UtilityClass.php`
- Model scope helpers: Add as query scopes in `app/Models/` (e.g., `scope*()` methods)
- DateTime helpers: Use Carbon facade (pre-installed with Laravel)

**Custom Exceptions:**
- Location: `app/Exceptions/{DomainException}.php`
- Pattern: Extend `\Exception` or `\RuntimeException`
- Handler: Register in `bootstrap/app.php` via `withExceptions()`

**Custom Middleware:**
- Location: `app/Http/Middleware/{MiddlewareName}.php` (create with `php artisan make:middleware MiddlewareName`)
- Registration: Add to `bootstrap/app.php` in `withMiddleware()` callback
- Pattern: Implement `handle(Request $request, Closure $next): Response`

**Form Requests (Validation):**
- Location: `app/Http/Requests/{Action}{Resource}Request.php` (e.g., `StoreUserRequest.php`, `UpdatePostRequest.php`)
- Create with: `php artisan make:request StoreUserRequest`
- Methods: `rules()` returns validation array, `messages()` returns custom error messages

**Policies (Authorization):**
- Location: `app/Policies/{Model}Policy.php` (create with `php artisan make:policy UserPolicy --model=User`)
- Methods: `view()`, `create()`, `update()`, `delete()`, `restore()`, `forceDelete()`
- Registration: Register in `AuthServiceProvider` or use auto-discovery (default in Laravel 12)

**Seeders:**
- Location: `database/seeders/` (create with `php artisan make:seeder {SeedName}`)
- Call from: `DatabaseSeeder::run()` or invoke directly with `php artisan db:seed --class={SeedName}`

## Special Directories

**bootstrap/cache/:**
- Purpose: Bootstrap cache for optimized application loading
- Generated: Yes, auto-generated by Laravel
- Committed: No, should be in `.gitignore`
- Clear with: `php artisan optimize:clear`

**storage/:cache, framework/:**
- Purpose: Application runtime cache, sessions, views
- Generated: Yes, auto-generated during runtime
- Committed: No, directory exists but files are generated
- Clear with: `php artisan cache:clear`, `php artisan view:clear`

**vendor/:**
- Purpose: Composer dependencies
- Generated: Yes, installed by `composer install`
- Committed: No, should be in `.gitignore` (use `composer.lock` for reproducibility)

**database/database.sqlite:**
- Purpose: Development SQLite database file
- Generated: Created automatically on first migration
- Committed: No (local development data; reset with `php artisan migrate:fresh --seed`)

**.env:**
- Purpose: Environment variables for this deployment
- Generated: No, created from `.env.example`
- Committed: No, must be in `.gitignore` (secrets)
- Required: Yes, create from `.env.example` with `composer run setup`

**.idea/:, .claude/:**
- Purpose: IDE configuration and Claude Code context
- Generated: Yes, auto-generated by IDE/Claude
- Committed: No, should be in `.gitignore`

---

*Structure analysis: 2026-02-25*
