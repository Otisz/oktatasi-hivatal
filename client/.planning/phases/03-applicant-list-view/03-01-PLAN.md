---
phase: 03-applicant-list-view
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/views/ApplicantsView.vue]
autonomous: false
requirements: [LIST-01, LIST-02, LIST-03, LIST-04, LAYOUT-01, LAYOUT-02]

must_haves:
  truths:
    - "Visiting /applicants shows a list of applicant cards, each displaying university, faculty, and programme name"
    - "A loading skeleton of 3 pulsing cards is visible while applicants are being fetched"
    - "Clicking any applicant card navigates to /applicants/:id for that applicant"
    - "When the API returns an empty array, a centered Hungarian empty state message is shown"
    - "The layout is readable on mobile (single column) and desktop without horizontal scrolling"
    - "The page has consistent structure with the existing header and content pattern"
  artifacts:
    - path: "src/views/ApplicantsView.vue"
      provides: "Applicant list view with loading, empty, error, and list states"
      min_lines: 40
  key_links:
    - from: "src/views/ApplicantsView.vue"
      to: "src/composables/useApplicants.ts"
      via: "useApplicants() composable import"
      pattern: "useApplicants"
    - from: "src/views/ApplicantsView.vue"
      to: "src/router/index.ts"
      via: "router.push to applicant-detail named route"
      pattern: "applicant-detail"
---

<objective>
Implement the applicant list view — the app's entry point at `/applicants` — with card-based layout, loading skeleton, empty state, error state, and click-to-navigate to score detail.

Purpose: This is the first view users see. It must display all applicants with programme info, provide loading feedback, handle empty datasets, and enable navigation to individual score views.
Output: Fully functional `src/views/ApplicantsView.vue` replacing the current placeholder.
</objective>

<execution_context>
@/Users/otisz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/otisz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-applicant-list-view/03-CONTEXT.md
@.planning/phases/03-applicant-list-view/03-RESEARCH.md

@src/views/ApplicantsView.vue
@src/composables/useApplicants.ts
@src/types/api.ts
@src/router/index.ts
@src/App.vue

<interfaces>
<!-- Key types and contracts the executor needs. Extracted from codebase. -->

From src/types/api.ts:
```typescript
export interface Program {
  university: string
  faculty: string
  name: string
}

export interface Applicant {
  id: string
  program: Program
}
```

From src/composables/useApplicants.ts:
```typescript
// Returns UseQueryReturnType<Applicant[], Error>
// Destructure: { isLoading, isError, data }
// isLoading = isPending && isFetching (true only on first fetch with no cache)
// data is Ref<Applicant[] | undefined>
export function useApplicants(): UseQueryReturnType<Applicant[], Error>
```

From src/router/index.ts:
```typescript
// Named route for navigation target:
// { name: 'applicant-detail', params: { id: string } }
```

From src/App.vue:
```html
<!-- Established container pattern: -->
<div class="max-w-4xl mx-auto px-4 py-4">
<!-- Color scheme: bg-gray-50 page, bg-white surfaces, border-gray-200 borders -->
<!-- text-gray-900 primary, text-gray-500 secondary, bg-blue-500 accent -->
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement ApplicantsView.vue with all rendering states</name>
  <files>src/views/ApplicantsView.vue</files>
  <action>
Replace the placeholder content in `src/views/ApplicantsView.vue` with the full list view implementation.

**Script setup:**
- Import `useRouter` from `vue-router`
- Import `useApplicants` from `@/composables/useApplicants`
- Destructure `{ isLoading, isError, data }` from `useApplicants()`
- Create `navigateTo(id: string)` function that calls `router.push({ name: 'applicant-detail', params: { id } })`

**Template — four mutually exclusive branches using v-if/v-else-if/v-else:**

All branches wrapped in `<div class="max-w-4xl mx-auto px-4 py-6">` (matches ApplicantDetailView.vue pattern). Remove the existing `<h2>Jelentkezők</h2>` heading — the cards are self-explanatory and the header already identifies the app.

**Branch 1: Loading skeleton** (`v-if="isLoading"`)
- Container: `<div class="space-y-3">`
- 3 skeleton cards via `v-for="n in 3" :key="n"`
- Each skeleton card: `<div class="bg-white border border-gray-200 rounded-lg p-4 animate-pulse">`
- 3 bars inside each card:
  - `<div class="h-3 bg-gray-200 rounded w-1/3 mb-3"></div>` (university/faculty line)
  - `<div class="h-5 bg-gray-200 rounded w-2/3 mb-2"></div>` (programme name — taller)
  - `<div class="h-3 bg-gray-200 rounded w-1/2"></div>` (secondary info)
- Use `isLoading` (NOT `isPending`) — `isLoading` is `isPending && isFetching` in TanStack Query v5, so it is false on back-navigation when cached data exists

**Branch 2: Error state** (`v-else-if="isError"`)
- `<div class="text-center py-12">`
- Inline SVG: exclamation-triangle or similar warning icon (h-12 w-12 text-gray-300 mx-auto)
- `<p class="text-lg font-medium text-gray-900 mt-4">Hiba történt</p>`
- `<p class="text-sm text-gray-500 mt-1">Az adatok betöltése sikertelen. Kérjük, próbálja újra később.</p>`

**Branch 3: Empty state** (`v-else-if="data?.length === 0"`)
- `<div class="text-center py-12">`
- Inline SVG: users icon (group of people outline), `class="mx-auto h-12 w-12 text-gray-300"`, `fill="none"`, `viewBox="0 0 24 24"`, `stroke="currentColor"`, `aria-hidden="true"`
- SVG path: Use a simple users/people outline icon. Example SVG paths for a users icon:
  `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />`
- `<p class="text-lg font-medium text-gray-900 mt-4">Nincsenek jelentkezők</p>`
- `<p class="text-sm text-gray-500 mt-1">A rendszerben még nem szerepel egyetlen jelentkező sem.</p>`

**Branch 4: Applicant list** (`v-else`)
- Container: `<div class="space-y-3">`
- `v-for="applicant in data" :key="applicant.id"`
- Each card: `<div class="bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors" @click="navigateTo(applicant.id)">`
- Inside each card, two children:
  1. Left content `<div>`:
     - `<p class="text-xs text-gray-500">{{ applicant.program.university }} — {{ applicant.program.faculty }}</p>` (em dash, not hyphen)
     - `<p class="text-base font-semibold text-gray-900 mt-0.5">{{ applicant.program.name }}</p>`
  2. Right chevron: `<span class="text-gray-400 text-xl ml-4 shrink-0" aria-hidden="true">›</span>` (right single guillemet, `shrink-0` to prevent chevron from shrinking on long text)

**No `<style>` block needed** — all styling via Tailwind utility classes.

**Biome compliance:** Run `npx biome check src/views/ApplicantsView.vue` after writing. Fix any formatting issues. The project uses Biome 2.x with default Vue SFC support.
  </action>
  <verify>
    <automated>cd /Users/otisz/Projects/oktatasi-hivatal/client && npx biome check src/views/ApplicantsView.vue && npx vue-tsc --noEmit</automated>
  </verify>
  <done>
- ApplicantsView.vue has four rendering branches: loading skeleton, error, empty state, applicant list
- Loading skeleton shows 3 animated cards with `animate-pulse` using `isLoading` (not `isPending`)
- Empty state shows Hungarian text "Nincsenek jelentkezők" with users icon
- Each applicant card displays programme name (bold), university and faculty (small), and a chevron
- Clicking a card calls `router.push({ name: 'applicant-detail', params: { id } })`
- Container uses `max-w-4xl mx-auto px-4 py-6` matching existing pattern
- Biome check passes with no violations
- TypeScript compilation passes with no errors
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify applicant list view in browser</name>
  <files>src/views/ApplicantsView.vue</files>
  <action>
Human visual and functional verification of the applicant list view.

What was built:
- Complete applicant list view at `/applicants` with card-based layout showing all applicants with programme name (bold), university, and faculty
- Loading skeleton (3 pulsing cards) visible on first load
- Empty state with Hungarian "Nincsenek jelentkezők" message
- Click-to-navigate to `/applicants/:id`
- Responsive layout (single column, readable on mobile and desktop)

How to verify:
1. Start the dev server: `npm run dev`
2. Open browser to `http://localhost:5173/applicants`
3. Loading skeleton: On first load (or after clearing cache), briefly observe 3 pulsing skeleton cards before data appears
4. List rendering: Verify each card shows university and faculty in small gray text, programme name in bold below, and a right chevron on each card
5. Hover state: Hover over any card — background should change to subtle gray
6. Navigation: Click any applicant card — should navigate to `/applicants/{id}` showing the detail placeholder
7. Back navigation: Click browser back — list should appear instantly (cached data, no skeleton)
8. Responsive: Resize browser to mobile width (~375px) — cards should remain readable, single column, no horizontal scroll
9. Empty state (optional): If you can temporarily modify the API to return empty array, verify the "Nincsenek jelentkezők" message appears centered with an icon

Resume signal: Type "approved" or describe any visual/functional issues.
  </action>
  <verify>Human confirms visual and functional correctness in the browser</verify>
  <done>User has approved the applicant list view — all rendering states, navigation, and responsive layout confirmed working</done>
</task>

</tasks>

<verification>
- `npx biome check src/views/ApplicantsView.vue` passes (lint + format)
- `npx vue-tsc --noEmit` passes (TypeScript)
- ApplicantsView.vue imports `useApplicants` and destructures `isLoading`, `isError`, `data`
- ApplicantsView.vue imports `useRouter` and pushes to `applicant-detail` named route
- Template has exactly 4 branches: `v-if="isLoading"`, `v-else-if="isError"`, `v-else-if="data?.length === 0"`, `v-else`
- All UI text is in Hungarian
- Cards have `cursor-pointer`, `hover:bg-gray-50`, `transition-colors`
- Skeleton uses `animate-pulse` with 3 cards
</verification>

<success_criteria>
1. Visiting `/applicants` shows a list of applicants, each displaying university, faculty, and programme name
2. A loading skeleton is visible between page load and the first applicant appearing in the list
3. Clicking any applicant row navigates to `/applicants/:id` for that applicant
4. When the API returns an empty array, an empty state message is shown instead of a blank list
5. The layout is readable on a mobile viewport (single column) and a desktop viewport without horizontal scrolling
</success_criteria>

<output>
After completion, create `.planning/phases/03-applicant-list-view/03-01-SUMMARY.md`
</output>
